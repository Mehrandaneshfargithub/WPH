function secion_dataBound(){let n=$("#ClinicSectionId").data("kendoDropDownList");var t=n.dataSource.data();console.log("sss");firstLoad?(firstLoad=!1,n.dataSource.remove(t[0]),console.log("aaa")):n.select(n.ul.children().eq(0))}function CreateTelerikComponents(){nameAuto=$("#Name2").kendoAutoComplete({dataTextField:"PhoneNumberAndName",filter:"contains",clearButton:!1,enable:enable,noDataTemplate:$("#noDataTemplate").html(),select:OnPatientSelectInEmergencyReception,dataSource:{serverFiltering:!1,transport:{read:{url:"/PatientReceptionAnalysis/GetPatient"}}}}).data("kendoAutoComplete");$("#PhoneNumber").kendoTextBox({});$("#GenderId").kendoDropDownList({dataTextField:"Name",dataValueField:"Id",dataSource:{serverFiltering:!1,transport:{read:{url:"/BaseInfo/GetAllGenders"}}}});$("#DateOfBirth").kendoDatePicker({format:"dd/MM/yyyy",max:new Date,animation:!1,change:changeBirthOfDatePatientDatetimePicker});$("#Year").kendoTextBox({});$("#Month").kendoTextBox({});$("#AddressName").kendoAutoComplete({dataTextField:"Name",filter:"contains",clearButton:!1,select:OnSelectAddress,dataSource:{serverFiltering:!1,transport:{read:{url:"/BaseInfo/GetAllAddress"}}}}).data("kendoAutoComplete");$("#MotherName").kendoTextBox({});$("#PatientAttendanceName").kendoTextBox({});$("#Service").kendoDropDownList({dataTextField:"Name",dataValueField:"Guid",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/Service/GetAllServicesExceptOperation"}}}});$("#ServiceNumber").kendoTextBox({enable:enable});$("#SurgeryOne").kendoAutoComplete({dataTextField:"UserName",filter:"contains",enable:enable,clearButton:!1,select:OnSurgeryOneSelect,dataSource:{serverFiltering:!1,transport:{read:{url:"/Doctor/GetAllDoctors"}}}}).data("kendoAutoComplete");$("#Operation").kendoDropDownList({dataTextField:"Name",dataValueField:"Guid",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/Service/GetAllOperationServices"}}}});$("#datetimepicker").kendoDateTimePicker({value:new Date,format:"dd/MM/yyyy HH:mm",dateInput:!0});$("#ArrivalId").kendoDropDownList({dataTextField:"Name",dataValueField:"Id",enable:enable,select:selectArrival,dataSource:{serverFiltering:!1,transport:{read:{url:"/BaseInfo/GetAllArrivals"}}}});$("#CriticallyId").kendoDropDownList({dataTextField:"Name",dataValueField:"Id",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/BaseInfo/GetAllCritically"}}}});$("#AmbulanceId").kendoDropDownList({dataTextField:"Name",dataValueField:"Guid",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/Ambulance/GetAllAmbulances"}}}});$("#FromHospitalId").kendoDropDownList({dataTextField:"Name",dataValueField:"Guid",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/Hospital/GetAllHospitals"}}}});$("#ToHospitalId").kendoDropDownList({dataTextField:"Name",dataValueField:"Guid",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/Hospital/GetAllHospitals"}}}});$("#PatientHealthId").kendoDropDownList({dataTextField:"Name",dataValueField:"Guid",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/BaseInfo/GetAllPatientHealth"}}}});$("#Cost").kendoNumericTextBox({format:"N0",enable:enable,min:0,max:1e7});$("#CostCurrencyId").kendoDropDownList({dataTextField:"Name",dataValueField:"Id",enable:enable,dataSource:{serverFiltering:!1,transport:{read:{url:"/BaseInfo/GetAllCurrencies"}}}});$("#AmbulanceExplanation").kendoTextArea({rows:2,maxLength:200,enable:enable});$("#Description").kendoTextArea({rows:2,maxLength:200,enable:enable});$("#RoomBedName").kendoTextBox({enable:enable});$(".k-nodata").addClass("hidden")}function SetReceptionAmounts(n){$("#PatientId").val(n.PatientId);$("#EntranceDate").val(n.EntranceDate);$("#ExitDate").val(n.ExitDate);$("#AddressId").val(n.Patient.AddressId);$("#ReceptionNum").val(n.ReceptionNum);$("#reception-num").text(n.ReceptionNum);$("#ReceptionDate").val(n.ReceptionDate);$("#reception-date").text(n.ReceptionDateString);$("#StatusId").val(n.StatusId);$("#Guid").val(n.Guid);$("#CreatedUserId").val(n.CreatedUserId);$("#Name2").val(n.Patient.User.Name);$("#PhoneNumber").val(n.Patient.User.PhoneNumber);let i=$("#GenderId").data("kendoDropDownList");i.value(n.Patient.User.GenderId);$("#DateOfBirth").val(n.Patient.DateOfBirth);setTimeout(function(){let n=$("#DateOfBirth").data("kendoDatePicker"),t=$("#DateOfBirth").attr("aria-owns");n.open();n.close();let i=$("#"+t+" .k-state-focused a").click()});$("#AddressName").val(n.Patient.Address.Name);$("#MotherName").val(n.Patient.MotherName);$("#PatientAttendanceName").val(n.PatientAttendanceName);let r=$("#ClinicSectionId").data("kendoDropDownList");r.value(n.ClinicSectionId);let t=$("#PurposeId").data("kendoDropDownList");t.value(n.PurposeId);t.enable(enable);PurposeChange()}function arrival_databound(){let n=$("#ArrivalId").data("kendoDropDownList");n.text()==="Ambulance"&&$("#ambulanceSection").removeClass("hidden")}function ReserveInsertAge(){var r=parseInt($("#Year").val()),i=parseInt($("#Month").val()),u,n;($("#Month").val()===""||i===undefined)&&(i=0);($("#Year").val()===""||r===undefined)&&(r=0);i>11&&(i=11,$("#Month").val("11"));u=new Date;n=u;n.setFullYear(n.getFullYear()-r);n.setMonth(n.getMonth()-i);let t=n.getMonth()+1;t.toString()!=="10"&&t.toString()!=="11"&&t.toString()!=="12"&&(t="0"+t.toString());$("#DateOfBirthDay").val(1);$("#DateOfBirthMonth").val(t);$("#DateOfBirthYear").val(n.getFullYear());$("#DateOfBirth").val("01/"+t+"/"+n.getFullYear())}function bodyPadding(){$("body").addClass("body-padding")}function PrintReception(){var e,t,i,r;let n=$("#datetimepicker").data("kendoDateTimePicker").value(),u="",f="";$("#PurposeId").data("kendoDropDownList").text()==="Surgery"&&(u=n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear()+"  "+n.getHours()+":"+n.getMinutes(),f=$("#Operation").data("kendoDropDownList").text());let o={PatientName:$("#Name2").val(),MotherName:$("#MotherName").val(),AttendantName:$("#PatientAttendanceName").val(),Gender:$("#GenderId").data("kendoDropDownList").text(),Age:$("#Year").val(),Room:$("#RoomBedId").data("kendoDropDownList").text(),EntranceDate:$("#reception-date").text(),OperationDate:u,Operation:f,Surgery:$("#SurgeryOne").val()},s=AggregateData();if(s){$(".loader").removeClass("hidden");e=$(':input:hidden[name*="RequestVerificationToken"]');let n="/Reception/AddReception",u="/PatientReception/Form",f=$("#Emergency").text();(f.toLowerCase()==="true"||f===!0)&&(n="/EmergencyReception/AddReception",u="/PatientReception/Form");reception_formData.append("__RequestVerificationToken",e.attr("value"));t=getImagesFromDiv("main_attachments_img");for(let n=0;n<t.length;n++)reception_formData.append("MainAttachments",t[n]);i=getImagesFromDiv("other_attachments_img");for(let n=0;n<i.length;n++)reception_formData.append("OtherAttachments",i[n]);r=getImagesFromDiv("polic_report_attachments_img");for(let n=0;n<r.length;n++)reception_formData.append("PoliceReport",r[n]);$.ajax({type:"Post",url:n,data:reception_formData,processData:!1,contentType:!1,success:function(n){n!==0&&$.ajax({type:"Post",url:"/Reception/PrintReceptionReport",data:o,success:function(n){n!==0&&(draw2(n),$(".page-content").load(u,function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")}))}})}})}bodyPadding()}function Exit(){$(".page-content").load("/PatientReception/Form",function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}function OkAndExit(){var r,n,t,i;let u=AggregateData();if(u){$(".loader").removeClass("hidden");r=$(':input:hidden[name*="RequestVerificationToken"]');let u="/Reception/AddReception",f="/PatientReception/Form",e=$("#Emergency").text();(e.toLowerCase()==="true"||e===!0)&&(u="/EmergencyReception/AddReception",f="/PatientReception/Form");reception_formData.append("__RequestVerificationToken",r.attr("value"));n=getImagesFromDiv("main_attachments_img");for(let t=0;t<n.length;t++)reception_formData.append("MainAttachments",n[t]);t=getImagesFromDiv("other_attachments_img");for(let n=0;n<t.length;n++)reception_formData.append("OtherAttachments",t[n]);i=getImagesFromDiv("polic_report_attachments_img");for(let n=0;n<i.length;n++)reception_formData.append("PoliceReport",i[n]);$.ajax({type:"Post",url:u,data:reception_formData,processData:!1,contentType:!1,success:function(n){n!==0&&$(".page-content").load(f,function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}})}bodyPadding()}function OkAndNew(){var r,n,t,i;let u=AggregateData();if(u){$(".loader").removeClass("hidden");r=$(':input:hidden[name*="RequestVerificationToken"]');let u="/Reception/AddReception",f="/Reception/Form",e=$("#Emergency").text();(e.toLowerCase()==="true"||e===!0)&&(u="/EmergencyReception/AddReception",f="/EmergencyReception/Form");reception_formData.append("__RequestVerificationToken",r.attr("value"));n=getImagesFromDiv("main_attachments_img");for(let t=0;t<n.length;t++)reception_formData.append("MainAttachments",n[t]);t=getImagesFromDiv("other_attachments_img");for(let n=0;n<t.length;n++)reception_formData.append("OtherAttachments",t[n]);i=getImagesFromDiv("polic_report_attachments_img");for(let n=0;n<i.length;n++)reception_formData.append("PoliceReport",i[n]);$.ajax({type:"Post",url:u,data:reception_formData,processData:!1,contentType:!1,success:function(n){n!==0&&$(".page-content").load(f,function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}})}bodyPadding()}function AggregateData(){$("#SurgeryOne-box").addClass("hidden");reception_formData=new FormData;let e=$("#Name2").val().replace(/ /g,"");if(e==="")return bootbox.dialog({message:"<h5 class='MyFont-Roboto-header'> Please Fill Patinet Name <\/h5>",className:"bootbox-class MyFont-Roboto-header",size:"small"}),window.setTimeout(function(){bootbox.hideAll();$("#Name2").focus()},2e3),bodyPadding(),!1;let h=$("#DateOfBirth").data("kendoDatePicker").value(),r=$("#Emergency").text();reception_formData.append("Patient.Guid",$("#PatientId").val());reception_formData.append("Patient.Name",$("#Name2").val());reception_formData.append("Patient.GenderId",$("#GenderId").val());reception_formData.append("Patient.PhoneNumber",$("#PhoneNumber").val());reception_formData.append("Patient.AddressId",$("#AddressId").val());reception_formData.append("Patient.DateOfBirthDay",$("#DateOfBirthDay").val());reception_formData.append("Patient.DateOfBirthMonth",$("#DateOfBirthMonth").val());reception_formData.append("Patient.DateOfBirthYear",$("#DateOfBirthYear").val());reception_formData.append("Patient.MotherName",$("#MotherName").val());reception_formData.append("Patient.AddressName",$("#AddressName").val());(r.toLowerCase()==="true"||r===!0)&&(reception_formData.append("Emergency.Guid",$("#EmergencyId").val()),reception_formData.append("Emergency.ArrivalId",$("#ArrivalId").val()),reception_formData.append("Emergency.CriticallyId",$("#CriticallyId").val()),$("#ambulanceSection").hasClass("hidden")||(reception_formData.append("ReceptionAmbulance.Guid",$("#ReceptionAmbulancesId").val()),reception_formData.append("ReceptionAmbulance.AmbulanceId",$("#AmbulanceId").val()),reception_formData.append("ReceptionAmbulance.FromHospitalId",$("#FromHospitalId").val()),reception_formData.append("ReceptionAmbulance.ToHospitalId",$("#ToHospitalId").val()),reception_formData.append("ReceptionAmbulance.PatientHealthId",$("#PatientHealthId").val()),reception_formData.append("ReceptionAmbulance.Cost",$("#Cost").val()),reception_formData.append("ReceptionAmbulance.Explanation",$("#AmbulanceExplanation").val()),reception_formData.append("ReceptionAmbulance.CostCurrencyId",$("#CostCurrencyId").val())));let t=$("#PurposeId").data("kendoDropDownList").text(),o=$("#Service").data("kendoDropDownList"),s=$("#Operation").data("kendoDropDownList"),i=null,u=null,f=null;if(t==="Service"&&(i=o.value()),t==="Surgery"&&(i=s.value(),u=$("#datetimepicker").val(),f=$("#SurgeryOneVal").text(),$("#SurgeryOne").val()===""||$("#SurgeryOne").val()===null)){$("#SurgeryOne-box").removeClass("hidden");return}let n=$("#datetimepicker").data("kendoDateTimePicker").value();return reception_formData.append("Guid",$("#Guid").val()),reception_formData.append("CreatedUserId",$("#CreatedUserId").val()),reception_formData.append("CreatedDate",$("#CreatedDate").val()),reception_formData.append("PatientId",$("#PatientId").val()),reception_formData.append("EntranceDate",$("#EntranceDate").val()),reception_formData.append("ExitDate",$("#ExitDate").val()),reception_formData.append("PatientAttendanceName",$("#PatientAttendanceName").val()),reception_formData.append("DiscountCurrencyId",11),reception_formData.append("Description",$("#Description").val()),reception_formData.append("ReceptionNum",$("#ReceptionNum").val()),reception_formData.append("ReceptionDate",$("#ReceptionDate").val()),reception_formData.append("ClinicSectionId",$("#ClinicSectionId").val()),reception_formData.append("RoomBedId",$("#RoomBedId").val()),reception_formData.append("PurposeName",t),reception_formData.append("PurposeId",$("#PurposeId").data("kendoDropDownList").value()),reception_formData.append("SurgeryOne",f),reception_formData.append("SurgeryOneName",$("#SurgeryOne").val()),reception_formData.append("ServiceId",i),reception_formData.append("SurgeryTime",u),reception_formData.append("SurgeryTimeYear",n.getFullYear()),reception_formData.append("SurgeryTimeMonth",n.getMonth()+1),reception_formData.append("SurgeryTimeDay",n.getDate()),reception_formData.append("SurgeryTimeTime",n.getHours()+":"+n.getMinutes()),reception_formData.append("ServiceNumber",$("#ServiceNumber").val()),reception_formData.append("ClinicSectionName",$("#ClinicSectionId").data("kendoDropDownList").text()),!0}function readImagesFromServer(n,t,i){$.ajax({type:"Get",url:n,success:function(n){if(n!=0){var u=document.getElementById(t),r=u.getElementsByTagName("img").length;for(let i=0;i<n.length;i++)$("#"+t).append($("<span id='"+n[i].Guid+"' class='saved_attachments_image_container'><span class='fa fa-close saved_attachments_image_remove' data-id='"+n[i].Guid+"' onclick='deleteSavedAttachment(this)'><\/span><img ondblclick='openSavedPic(this)' class='saved_attachments_image_thumb' data-src='"+n[i].ImageAddress+"'  src=\""+n[i].ThumbNailAddress+'" /><\/span>'));r=r+n.length;document.getElementById(i).innerText=r+" file"}}})}function openPic(n){var i=n.src,t;$("#imageEditor").empty();this._kendoImageEditor=$("#imageEditor").kendoImageEditor({imageUrl:i,width:"100%",saveAs:{fileName:"image_edited.png"},toolbar:{items:["crop","resize","undo","redo","zoomIn","zoomOut",{type:"button",icon:"rotate",text:"Rotate",enable:!0,command:"RotateImageRightImageEditorCommand"},{type:"button",text:"Save",icon:"save",enable:!0,command:"SaveOnPreviousFile"},]}}).data("kendoImageEditor");t=kendo.ui.imageeditor;t.commands.RotateImageRightImageEditorCommand=t.ImageEditorCommand.extend({exec:function(){var u=this,f=u.options,t=u.imageeditor,i=t.getCanvasElement(),r=t.getCurrent2dContext(),n=t.getCurrentImage();i.width=n.height;i.height=n.width;r.clearRect(0,0,i.width,i.height);r.translate(n.height/2,n.width/2);r.rotate(Math.PI/2);r.drawImage(n,-n.width/2,-n.height/2);t.drawImage(i.toDataURL()).done(function(n){t.drawCanvas(n)}).fail(function(n){t.trigger("error",n)})}});t.commands.SaveOnPreviousFile=t.ImageEditorCommand.extend({exec:function(){var t=this,e=t.options,r=t.imageeditor,u=r.getCanvasElement();let f=u.toDataURL(),o=i;n.src=f}});$("#window").data("kendoWindow").center().open()}function openSavedPic(n){var i=$(n).attr("data-src"),t;$("#imageEditor").empty();this._kendoImageEditor=$("#imageEditor").kendoImageEditor({imageUrl:i,width:"100%",saveAs:{fileName:"image_edited.png"},toolbar:{items:["zoomIn","zoomOut",]}}).data("kendoImageEditor");t=kendo.ui.imageeditor;t.commands.RotateImageRightImageEditorCommand=t.ImageEditorCommand.extend({exec:function(){var u=this,f=u.options,t=u.imageeditor,i=t.getCanvasElement(),r=t.getCurrent2dContext(),n=t.getCurrentImage();i.width=n.height;i.height=n.width;r.clearRect(0,0,i.width,i.height);r.translate(n.height/2,n.width/2);r.rotate(Math.PI/2);r.drawImage(n,-n.width/2,-n.height/2);t.drawImage(i.toDataURL()).done(function(n){t.drawCanvas(n)}).fail(function(n){t.trigger("error",n)})}});t.commands.SaveOnPreviousFile=t.ImageEditorCommand.extend({exec:function(){var t=this,e=t.options,r=t.imageeditor,u=r.getCanvasElement();let f=u.toDataURL(),o=i;n.src=f}});$("#window").data("kendoWindow").center().open()}function deleteSavedAttachment(n){$("#DeleteSavedAttachmentModal #ERROR_ThisRecordHasDependencyOnItInAnotherEntity").hasClass("hidden")||$("#DeleteSavedAttachmentModal #ERROR_ThisRecordHasDependencyOnItInAnotherEntity").addClass("hidden");$("#DeleteSavedAttachmentModal #ERROR_SomeThingWentWrong").hasClass("hidden")||$("#DeleteSavedAttachmentModal #ERROR_SomeThingWentWrong").addClass("hidden");$(".loader").removeClass("hidden");$("#DeleteSavedAttachmentModal").modal("toggle");var t=$(n).attr("data-id");$("#btn-deleteSavedAttachment-accept").attr("data-id",t);$(".loader").fadeIn("slow");$(".loader").addClass("hidden")}function resizeImage(n,t){return new Promise(i=>{let r=new Image;r.src=n;r.onload=()=>{var e=1e3,o=1e3,f,s;let n=r.width,u=r.height;n>u?n>e&&(u=u*(e/n),n=e):u>o&&(n=n*(o/u),u=o);f=document.createElement("canvas");f.width=n;f.height=u;s=f.getContext("2d");s.drawImage(r,0,0,n,u);i(f.toDataURL(t))}})}function dataURLtoFile(n,t){for(var r=n.split(","),e=r[0].match(/:(.*?);/)[1],u=atob(r[1]),i=u.length,f=new Uint8Array(i);i--;)f[i]=u.charCodeAt(i);return new File([f],t,{type:e})}function getImagesFromDiv(n){let t=[];var r=document.getElementById(n),i=r.getElementsByClassName("attachments_image_thumb");for(let n=0;n<i.length;n++){let r=i[n];if(r.naturalWidth>1e3||r.naturalHeight>1e3){let n=resizeImage($(r).attr("src"),$(r).attr("data-type"));r.src=n}t.push(dataURLtoFile($(r).attr("src"),$(r).attr("name")))}return t}function checkName(n,t){return new Promise(i=>{var u=document.getElementById(n),r=u.getElementsByClassName("attachments_image_thumb");if(r.length===0)i(!1);else{for(let n=0;n<r.length;n++)$(r[n]).attr("name")==t&&i(!0);i(!1)}})}function setFileCount(){var u=document.getElementById("main_attachments_img"),f=u.getElementsByTagName("img").length,n,t,i,r;document.getElementById("lbl_main_attachments_count").innerText=f+" file";n=document.getElementById("other_attachments_img");t=n.getElementsByTagName("img").length;document.getElementById("lbl_other_attachments_count").innerText=t+" file";i=document.getElementById("polic_report_attachments_img");r=i.getElementsByTagName("img").length;document.getElementById("lbl_polic_report_attachments_count").innerText=r+" file"}function readURLAttachments(n,t){var u=document.getElementById(t),i;let r=u.getElementsByTagName("img").length;if(n.files&&n.files.length>0)for(let u=0;u<n.files.length;u++){let f=n.files[u],e=checkName(t,f.name);f.type.match("image")&&e!=!0&&(i=new FileReader,i.onload=function(n){$("#"+t).append($("<span class='attachments_image_container'><span class='fa fa-close attachments_image_remove' ><\/span><img ondblclick='openPic(this)' class='attachments_image_thumb' data-type='"+f.type+"' data-size='"+f.size+"' name='"+f.name+"' src=\""+n.target.result+'" /><\/span>'));$(".attachments_image_remove").click(function(){$(this).parent(".attachments_image_container").remove();setFileCount()})},r++,i.readAsDataURL(f))}return r}function ChosseAnalysisModal(){$("#ChosseAnalysisModal").modal("toggle");createChooseAnalysisTabs()}function addNewAddress(){if($("#Name").val()===""){$("#Name-box").removeClass("hidden");return}var t=$("#addNewForm").serialize(),n;n=Address?$("#Address").attr("data-Value"):$("#Speciallity").attr("data-Value");$(".loader").removeClass("hidden");$.ajax({type:"Post",url:"/BaseInfo/AddOrUpdate",data:t,success:function(t){if(t!==0)if(t==="ValueIsRepeated")$("#Name-Exist").removeClass("hidden"),$(".loader").fadeIn("slow"),$(".loader").addClass("hidden");else{var i=t;$.ajax({type:"Post",data:{BaseInfoId:i,BaseInfoTypeId:n},url:"/BaseInfo/AddBaseInfoType",success:function(){Address?addressAuto.dataSource.read():SpeciallityDropDown.dataSource.read()}});$("#AddressModal").modal("hide");$(".modal-backdrop").remove();$("#AddressModal-body").empty();$(".loader").fadeIn("slow");$(".loader").addClass("hidden");SpeciallityDropDown.focus();SpeciallityDropDown.open()}}})}function PurposeChange(){let n=$("#PurposeId").data("kendoDropDownList");n.text()==="Service"?$(".serviceSection").removeClass("hidden"):$(".serviceSection").addClass("hidden");n.text()==="Surgery"?$(".surgerySection").removeClass("hidden"):$(".surgerySection").addClass("hidden")}function closeConfirmSelectPatientBedModal(){$("#ConfirmSelectPatientBedModal").modal("hide");$(".modal-backdrop:last").remove()}function confirmSelectPatientBedModal(){$("#SelectRoomBedModal #ERROR_SomeThingWentWrong").hasClass("hidden")||$("#SelectRoomBedModal #ERROR_SomeThingWentWrong").addClass("hidden");$.ajax({type:"post",url:"/ReceptionRoomBed/CloseOldReceptionRoomBed?receptionId="+temp_reception_value,success:function(n){if(n==0){var t=$("#RoomBedId").data("kendoDropDownList");t.dataSource.read();t.value(temp_room_bed_id);hideSelectRoomBedModal();closeConfirmSelectPatientBedModal()}else closeConfirmSelectPatientBedModal(),$("#SelectRoomBedModal #ERROR_SomeThingWentWrong").removeClass("hidden"),$(".loader").fadeIn("slow"),$(".loader").addClass("hidden")}})}function SelectRoomBed(){$("#Bed_Select").addClass("hidden");$("#SelectRoomBedModal #ERROR_SomeThingWentWrong").addClass("hidden");$("#SelectRoomBedModal").modal("toggle");var n=document.getElementById("ClinicSectionId").value;document.getElementById("TempRoomBedId").value="";$(".loader").removeClass("hidden");$("#SelectRoomBedModal-body").load("/Room/SelectModal?ClinicSectionId="+n+"",function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}function selectNewRoomBed(){if($("#ConfirmSelectPatientBedModal #ChangePatientBed").hasClass("hidden")||$("#ConfirmSelectPatientBedModal #ChangePatientBed").addClass("hidden"),$("#ConfirmSelectPatientBedModal #ChangeBedPatient").hasClass("hidden")||$("#ConfirmSelectPatientBedModal #ChangeBedPatient").addClass("hidden"),$("#ConfirmSelectPatientBedModal #SwapPatientsBeds").hasClass("hidden")||$("#ConfirmSelectPatientBedModal #SwapPatientsBeds").addClass("hidden"),temp_room_bed_id=="null"){$("#Bed_Select").removeClass("hidden");$(".loader").fadeIn("slow");$(".loader").addClass("hidden");return}if(temp_reception_value!="null"){$(".loader").removeClass("hidden");$("#ConfirmSelectPatientBedModal #ChangeBedPatient").removeClass("hidden");$("#ConfirmSelectPatientBedModal").modal("toggle");$(".loader").fadeIn("slow");$(".loader").addClass("hidden");return}var n=$("#RoomBedId").data("kendoDropDownList");n.dataSource.read();n.value(temp_room_bed_id);hideSelectRoomBedModal()}function closeSelectRoomBedModal(){var n=$("#RoomBedId").data("kendoDropDownList");n.dataSource.read();document.getElementById("TempRoomBedId").value="";document.getElementById("RoomBedId").value="";temp_room_bed_id="null";temp_reception_value="null";hideSelectRoomBedModal()}function hideSelectRoomBedModal(){$("#SelectRoomBedModal").modal("hide");$("#SelectRoomBedModal-body").empty();$(".modal-backdrop").remove()}function draw2(n){"use strict";var i=[],t;for(let r=0;r<n.allb.length;r++)t=new Image,t.src="data:image/jpeg;base64,"+n.allb[r],i.push(t.src);printJS({printable:i,type:"image"})}var Address,nameAuto,Reception,Patient;let addressAuto,SpeciallityDropDown;nameAuto=$("#Name2").data("kendoAutoComplete");let doctorAuto=$("#Doctor").data("kendoAutoComplete");var selectedItems=[],AllItems=[],previousCurrencyId,TotalReceived,ReceivedAmount=[],dinarDecimal,dollarDecimal,euroDecimal,pondDecimal,AllMoneyConverts=[],TotalTranslated,DiscountTranslated,PriceTranslated,CodeTranslated,TypeTranslated,NameTranslated,AmountTranslated,DateTranslated,baseCurrencyId,gridHieght=180,printed=!1,reception_formData;$("#Name2").on("focus",function(){$("#Name2-box").addClass("hidden");let n=nameAuto.value();nameAuto.search(n)});$("#PhoneNumber").on("focus",function(){});$("#SurgeryOne").on("focus",function(){let n=$("#SurgeryOne").data("kendoAutoComplete"),t=n.value();n.search(t)});$("#AddressName").on("focus",function(){let n=$("#AddressName").data("kendoAutoComplete"),t=n.value();n.search(t)});$("#Name2").on("keypress",function(n){n.which===13&&$("#PhoneNumber").focus()});var Numbers=["0","1","2","3","4","5","6","7","8","9","/",".","٠","١","٢","٣","٤","٥","٦","٧","٨","٩"," "],EnglishKey=["0","1","2","3","4","5","6","7","8","9","q","Q","w","e","E","r","R","t","T","y","Y","u","U","i","I","o","O","p","P","a","A","s","S","d","D","f","F","g","G","h","H","j","J","k","K","l","L","z","Z","x","X","c","C","v","V","b","B","n","N","m","M"],KurdishKey=[1632,1633,1634,1635,1636,1637,1638,1639,1640,1641,1602,96,1608,1749,1610,1585,1685,1578,1591,1740,1742,1574,1569,1581,1593,1734,1572,1662,1579,1575,1570,1587,1588,1583,1584,1601,1573,1711,1594,1607,8204,1688,1571,1705,1603,1604,1717,1586,1590,1582,1589,1580,1670,1700,1592,1576,1609,1606,1577,1605,1600];$("#PhoneNumber").on("keypress",function(n){let t=$("#GenderId").data("kendoDropDownList"),i=Numbers.indexOf(n.key);if(i!==-1||n.which===13||n.which===9){let i=KurdishKey.indexOf(n.which);if(n.which===13||n.which===9)t.focus(),t.open();else if(i!==-1){n.preventDefault();let t=EnglishKey[i],r=$(this).val();$(this).val(r+t)}}else n.preventDefault()});$("#GenderId").parent().on("keypress",function(n){if(n.which===13){let n=$("#DateOfBirth").data("kendoDatePicker");n.element.focus()}});$("#DateOfBirth").on("focus",function(){let n=$("#DateOfBirth").data("kendoDatePicker");n.element.select()});$("#DateOfBirth").on("keypress",function(n){n.which===13&&$("#AddressName").focus()});$("#Year").on("keypress",function(n){n.which===13&&$("#Month").focus()});$("#Year").on("focus",function(){$("#Year").select()});$("#Month").on("keypress",function(n){n.which===13&&$("#AddressName").focus()});$("#Month").on("focus",function(){$("#Month").select()});$("#AddressName").on("keypress",function(n){n.which===13&&$("#MotherName").focus()});$("#SurgeryOne").on("keypress",function(n){if(n.which===13){let n=$("#Operation").data("kendoDropDownList");n.focus();n.open()}});$("#Operation").parent().on("keypress",function(n){if(n.which===13){let n=$("#datetimepicker").data("kendoDateTimePicker");n.element.focus()}});$("#MotherName").on("keypress",function(n){n.which===13&&$("#PatientAttendanceName").focus()});$("#MotherName").on("focus",function(){$("#MotherName").select()});$("#PatientAttendanceName").on("keypress",function(n){if(n.which===13){let n=$("#Emergency").text();if(n.toLowerCase()==="false"){let n=$("#ClinicSectionId").data("kendoDropDownList");n.focus();n.open()}else{let n=$("#PurposeId").data("kendoDropDownList");n.focus();n.open()}}});$("#PatientAttendanceName").on("focus",function(){$("#PatientAttendanceName").select()});$("#ClinicSectionId").parent().on("keypress",function(n){if(n.which===13){let n=$("#PurposeId").data("kendoDropDownList");n.focus();n.open()}});$("#Explanation").on("keydown",function(n){n.which===9&&(n.preventDefault(),$("html, body").animate({scrollTop:450}),setTimeout(function(){$("#AllNameAutoComplete").focus()},500))});$("#btnOkNew").on("keydown",function(n){n.which===37&&$("#btnOkExit").focus()});$("#btnOkExit").on("keydown",function(n){n.which===39?$("#btnOkNew").focus():n.which===37&&$("#btnExit").focus()});$("#btnExit").on("keydown",function(n){n.which===39?$("#btnOkExit").focus():n.which===37&&$("#btnPrint").focus()});let enable=!0;$(document).ready(function(){let n=$("#Reception-Id").text();if(n!==""&&n!==null&&(enable=!1,readImagesFromServer("/PatientImage/GetMainPatientImageByRecptionId?receptionId="+n,"main_attachments_img","lbl_main_attachments_count"),readImagesFromServer("/PatientImage/GetOtherPatientImageByRecptionId?receptionId="+n,"other_attachments_img","lbl_other_attachments_count"),readImagesFromServer("/PatientImage/GetPolicReportPatientImageByReceptionId?receptionId="+n,"polic_report_attachments_img","lbl_polic_report_attachments_count")),CreateTelerikComponents(),n!==""&&n!==null&&n!==undefined){setTimeout(()=>{$(".loader").removeClass("hidden")});$.ajax({type:"Post",data:{ReceptionId:n},url:"/Reception/GetReception",success:function(t){t.Purpose.Name==="Surgery"?($.ajax({type:"Post",data:{ReceptionId:n},url:"/Surgery/GetReceptionSurgery",success:function(n){$("#SurgeryOne").val(n.SurgeryOne.UserName);$("#SurgeryOneVal").text(n.SurgeryOne.Guid);$("#datetimepicker").val(n.SurgeryDate);let t=$("#datetimepicker").data("kendoDateTimePicker");setTimeout(()=>{t.element.focus(),setTimeout(()=>{$("#btnExit").focus()},20)},20)}}),$.ajax({type:"Post",data:{ReceptionId:n},url:"/ReceptionService/GetReceptionOperationService",success:function(n){let t=$("#Operation").data("kendoDropDownList");t.value(n)}})):t.Purpose.Name==="Service"&&$.ajax({type:"Post",data:{ReceptionId:n},url:"/ReceptionService/GetReceptionExceptOperationService",success:function(n){$("#Service").val(n.ServiceId);$("#ServiceNumber").val(n.Number)}});SetReceptionAmounts(t);$(".loader").fadeIn("slow");$(".loader").addClass("hidden")}});$.ajax({type:"Post",data:{ReceptionId:n},url:"/ReceptionRoomBed/GetReceptionRoomBedId",success:function(n){$("#RoomBedName").val(n);$("#RoomBedNameParent").removeClass("hidden");$("#RoomBedParent").addClass("hidden");$(".loader").fadeIn("slow");$(".loader").addClass("hidden")}});let t=$("#Emergency").text();t.toLowerCase()==="true"&&($.ajax({type:"Post",data:{EmergencyId:n},url:"/EmergencyReception/GetEmergency",success:function(n){$("#ArrivalId").data("kendoDropDownList").value(n.ArrivalId);$("#CriticallyId").data("kendoDropDownList").value(n.CriticallyId);setTimeout(function(){arrival_databound()})}}),$.ajax({type:"Post",data:{ReceptionId:n},url:"/Reception/GetReceptionAmbulance",success:function(n){n!==null&&n!==""&&($("#AmbulanceId").data("kendoDropDownList").value(n.AmbulanceId),$("#FromHospitalId").data("kendoDropDownList").value(n.FromHospitalId),$("#ToHospitalId").data("kendoDropDownList").value(n.ToHospitalId),$("#PatientHealthId").data("kendoDropDownList").value(n.PatientHealthId),$("#Cost").data("kendoNumericTextBox").value(n.Cost),$("#AmbulanceExplanation").val(n.Explanation))}}))}else $.ajax({type:"Post",url:"/PatientReception/GetLatestReceptionNum",success:function(n){$("#ReceptionNum").val(n);$("#reception-num").text(n)}}),setTimeout(function(){let n=$("#DateOfBirth").data("kendoDatePicker");n.open();n.close();let t=$("#DateOfBirth").attr("aria-owns"),i=$("#"+t+" .k-footer a").click();$("#Name2").focus()});$.ajax({type:"Post",data:{settingName:"UseDollar"},url:"/ClinicSection/GetClinicSectionSettingValueBySettingName",success:function(n){if($("#useDollar").text(n),n==="true"){let n=$(".currencyId");n.removeClass("hidden")}}});TotalTranslated=$("#Translated").attr("data-TotalTranslated");DiscountTranslated=$("#Translated").attr("data-DiscountTranslated");PriceTranslated=$("#Translated").attr("data-PriceTranslated");CodeTranslated=$("#Translated").attr("data-CodeTranslated");TypeTranslated=$("#Translated").attr("data-TypeTranslated");NameTranslated=$("#Translated").attr("data-NameTranslated");AmountTranslated=$("#Translated").attr("data-AmountTranslated");DateTranslated=$("#Translated").attr("data-DateTranslated");let t=$("#PurposeId").data("kendoDropDownList");t.bind("dataBound",PurposeChange);setTimeout(function(){$("#Name2").focus()});let i=$("#Emergency").text();if(i.toLowerCase()==="true"){let n=$("#ClinicSectionId").data("kendoDropDownList");n.enable(!1)}else{let n=$("#ClinicSectionId").data("kendoDropDownList");n.bind("dataBound",secion_dataBound)}});let firstLoad=!0;var RTL=$("#RTL").attr("data-Value"),temp_room_bed_id="null",temp_reception_value="null";$("#btn-deleteSavedAttachment-accept").on("click",function(){$("#DeleteSavedAttachmentModal #ERROR_ThisRecordHasDependencyOnItInAnotherEntity").hasClass("hidden")||$("#DeleteSavedAttachmentModal #ERROR_ThisRecordHasDependencyOnItInAnotherEntity").addClass("hidden");$("#DeleteSavedAttachmentModal #ERROR_SomeThingWentWrong").hasClass("hidden")||$("#DeleteSavedAttachmentModal #ERROR_SomeThingWentWrong").addClass("hidden");var n=$(this).attr("data-id");$(".loader").removeClass("hidden");$.ajax({type:"Get",url:"/PatientImage/remove/"+n,success:function(t){t==="SUCCESSFUL"?($("#DeleteSavedAttachmentModal").modal("hide"),$(".modal-backdrop").remove(),$("#"+n+"").remove(),$(".loader").fadeIn("slow"),$(".loader").addClass("hidden"),setFileCount()):t==="ERROR_SomeThingWentWrong"?($("#DeleteSavedAttachmentModal #ERROR_SomeThingWentWrong").removeClass("hidden"),$(".loader").fadeIn("slow"),$(".loader").addClass("hidden")):t==="ERROR_ThisRecordHasDependencyOnItInAnotherEntity"&&($("#DeleteSavedAttachmentModal #ERROR_ThisRecordHasDependencyOnItInAnotherEntity").removeClass("hidden"),$(".loader").fadeIn("slow"),$(".loader").addClass("hidden"))}})});$("#lbl_other_attachments").click(function(){$("#otherAttachmentsUpload").trigger("click")});$("#other_attachments").on("click",function(n){n.target.matches("#lbl_other_attachments")||($("#other_attachments span:first").toggleClass("rotate"),$("#other_attachments_container").slideToggle(200,function(){}))});$("#lbl_main_attachments").click(function(){$("#mainAttachmentsUpload").trigger("click")});$("#main_attachments").on("click",function(n){n.target.matches("#lbl_main_attachments")||($("#main_attachments span:first").toggleClass("rotate"),$("#main_attachments_container").slideToggle(200,function(){}))});$("#lbl_polic_report_attachments").click(function(){$("#policReportAttachmentsUpload").trigger("click")});$("#polic_report_attachments").on("click",function(n){n.target.matches("#lbl_polic_report_attachments")||($("#polic_report_attachments span:first").toggleClass("rotate"),$("#polic_report_attachments_container").slideToggle(200,function(){}))});$("#otherAttachmentsUpload").change(function(){let n=readURLAttachments(this,"other_attachments_img");document.getElementById("lbl_other_attachments_count").innerText=n+" file"});$("#mainAttachmentsUpload").change(function(){let n=readURLAttachments(this,"main_attachments_img");document.getElementById("lbl_main_attachments_count").innerText=n+" file"});$("#policReportAttachmentsUpload").change(function(){let n=readURLAttachments(this,"polic_report_attachments_img");document.getElementById("lbl_polic_report_attachments_count").innerText=n+" file"});