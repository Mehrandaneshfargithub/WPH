function patientReceptionAnalysisAjax(){let n=$("#PatientReceptionId").val();return $.ajax({type:"Post",url:"/AnalysisResultMaster/GetAllPatientReceptionAnalysis",data:{ReceptionId:n},success:function(n){receptionAnalysis=n}})}function AnalysisResultAjax(){let n=$("#Guid").val();return $.ajax({type:"Post",url:"/AnalysisResult/GetAllAnalysisResult",data:{AnalysisResultMasterId:n},success:function(n){analysisResult=n}})}function CreateDynamicTab(n){let t=[],r=[],i="<div class ='tabs col-sm-11' style = 'overflow:auto;height:42vh'>",u="",f="",e=!1;ageInterval==="baby"?(u="B_minValue",f="B_maxValue"):ageInterval==="child"?(u="C_minValue",f="C_maxValue"):ageInterval==="adult"&&(gender==="Man"?(u="M_minValue",f="M_maxValue"):(u="F_minValue",f="F_maxValue"));for(let u=0;u<n.length;u++){if(n[u].GroupAnalysis!==null&&n[u].GroupAnalysis!==undefined){let f=n[u].GroupAnalysis.Name,i="<div class ='tabs col-sm-11' style = 'overflow:auto;height:42vh'>";if(n[u].GroupAnalysis.GroupAnalysis_Analysis!==null&&n[u].GroupAnalysis.GroupAnalysis_Analysis!==undefined){let r=n[u].GroupAnalysis.GroupAnalysis_Analysis;for(let f=0;f<r.length;f++){let e="<div class='radius-border row tabs' style = 'padding:1rem;margin:1rem 0;direction:ltr'><h3 class='MyFont-Roboto-grid' style='border-bottom: dotted 1px rgba(0,0,0,0.3);margin-bottom:1rem'>"+r[f].Analysis.Name+"<\/h3>";if(r[f].Analysis.Analysis_AnalysisItem!==null&&r[f].Analysis.Analysis_AnalysisItem!==undefined){let i=r[f].Analysis.Analysis_AnalysisItem;for(let r=0;r<i.length;r++)if((i[r].AnalysisItem.NormalValues==="null"||i[r].AnalysisItem.NormalValues===null||i[r].AnalysisItem.NormalValues==="NULL")&&(i[r].AnalysisItem.NormalValues=""),(i[r].AnalysisItem.UnitName==="null"||i[r].AnalysisItem.UnitName===null||i[r].AnalysisItem.UnitName==="NULL")&&(i[r].AnalysisItem.UnitName=""),i[r].AnalysisItem.ValueTypeName==="Numerical")if(analysisResult.length!==0){i[r].AnalysisId===undefined&&(i[r].AnalysisId=null);n[u].GroupAnalysis.Guid===undefined&&(i[r].AnalysisId=null);let t=analysisResult.find(t=>t.AnalysisId==i[r].AnalysisId&&t.AnalysisItemId==i[r].AnalysisItem.Guid&&t.GroupAnalysisId==n[u].GroupAnalysis.Guid);e=t===null||t===undefined?e+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+i[r].AnalysisItem.Name+" ("+i[r].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' style = 'width:100%'  type='number'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysis="+i[r].AnalysisId+"  data-analysisItem="+i[r].AnalysisItem.Guid+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid' >"+i[r].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>":e+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+i[r].AnalysisItem.Name+" ("+i[r].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' style = 'width:100%'  type='number'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysis="+i[r].AnalysisId+"  data-analysisItem="+i[r].AnalysisItem.Guid+"  value = "+t.Value+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+i[r].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}else e=e+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+i[r].AnalysisItem.Name+" ("+i[r].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' style = 'width:100%'  type='number'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysis="+i[r].AnalysisId+"  data-analysisItem="+i[r].AnalysisItem.Guid+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+i[r].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>";else if(i[r].AnalysisItem.ValueTypeName==="Optional"){e=e+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+i[r].AnalysisItem.Name+" ("+i[r].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input  id = 'dropdown_"+priority+"'  class = 'dropdown'  style = 'width:100%'  title='optional' style='width: 100%;'  data-group="+n[u].GroupAnalysis.Guid+"  data-analysis="+i[r].AnalysisId+"  data-analysisItem="+i[r].AnalysisItem.Guid+"   /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+i[r].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>";let f=[];if(i[r].AnalysisItem.AnalysisItemValuesRanges!==null&&i[r].AnalysisItem.AnalysisItemValuesRanges!==undefined)for(let n=0;n<i[r].AnalysisItem.AnalysisItemValuesRanges.length;n++)f.push(i[r].AnalysisItem.AnalysisItemValuesRanges[n]);t.push(f);priority++}else if(i[r].AnalysisItem.ValueTypeName==="Text")if(analysisResult.length!==0){i[r].AnalysisId===undefined&&(i[r].AnalysisId=null);n[u].GroupAnalysis.Guid===undefined&&(i[r].AnalysisId=null);let t=analysisResult.find(t=>t.AnalysisId==i[r].AnalysisId&&t.AnalysisItemId==i[r].AnalysisItem.Guid&&t.GroupAnalysisId==n[u].GroupAnalysis.Guid);e=t===null||t===undefined?e+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+i[r].AnalysisItem.Name+" ("+i[r].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysis="+i[r].AnalysisId+"  data-analysisItem="+i[r].AnalysisItem.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+i[r].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>":e+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+i[r].AnalysisItem.Name+" ("+i[r].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysis="+i[r].AnalysisId+"  data-analysisItem="+i[r].AnalysisItem.Guid+"  value = "+t.Value+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+i[r].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}else e=e+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+i[r].AnalysisItem.Name+" ("+i[r].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysis="+i[r].AnalysisId+"  data-analysisItem="+i[r].AnalysisItem.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+i[r].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}e=e+"<\/div>";i=i+e}}if(n[u].GroupAnalysis.GroupAnalysisItems!==null&&n[u].GroupAnalysis.GroupAnalysisItems!==undefined){let r=n[u].GroupAnalysis.GroupAnalysisItems,f="";for(let i=0;i<r.length;i++)if((r[i].AnalysisItem.NormalValues==="null"||r[i].AnalysisItem.NormalValues===null||r[i].AnalysisItem.NormalValues==="NULL")&&(r[i].AnalysisItem.NormalValues=""),(r[i].AnalysisItem.UnitName==="null"||r[i].AnalysisItem.UnitName===null||r[i].AnalysisItem.UnitName==="NULL")&&(r[i].AnalysisItem.UnitName=""),r[i].AnalysisItem.ValueTypeName==="Numerical")if(analysisResult.length!==0){n[u].GroupAnalysis.Guid===undefined&&(r[i].AnalysisId=null);let t=analysisResult.find(t=>t.AnalysisId==null&&t.AnalysisItemId==r[i].AnalysisItem.Guid&&t.GroupAnalysisId==n[u].GroupAnalysis.Guid);f=t===null||t===undefined?f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[i].AnalysisItem.Name+" ("+r[i].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' type='number' style = 'width:100%' title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysisItem="+r[i].AnalysisItem.Guid+"'   /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[i].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>":f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name'style = 'transform:translateY(20%)' >"+r[i].AnalysisItem.Name+" ("+r[i].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' type='number' style = 'width:100%' title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysisItem="+r[i].AnalysisItem.Guid+"  value = "+t.Value+"'   /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[i].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}else f=f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[i].AnalysisItem.Name+" ("+r[i].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' type='number' style = 'width:100%' title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysisItem="+r[i].AnalysisItem.Guid+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[i].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>";else if(r[i].AnalysisItem.ValueTypeName==="Optional"){f=f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[i].AnalysisItem.Name+" ("+r[i].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input  id = 'dropdown_"+priority+"'  class = 'dropdown' style = 'width:100%' title='optional'   data-group="+n[u].GroupAnalysis.Guid+"   data-analysisItem="+r[i].AnalysisItem.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[i].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>";let e=[];if(r[i].AnalysisItem.AnalysisItemValuesRanges!==null&&r[i].AnalysisItem.AnalysisItemValuesRanges!==undefined)for(let n=0;n<r[i].AnalysisItem.AnalysisItemValuesRanges.length;n++)e.push(r[i].AnalysisItem.AnalysisItemValuesRanges[n]);t.push(e);priority++}else if(r[i].AnalysisItem.ValueTypeName==="Text")if(analysisResult.length!==0){n[u].GroupAnalysis.Guid===undefined&&(r[i].AnalysisId=null);let t=analysisResult.find(t=>t.AnalysisId==null&&t.AnalysisItemId==r[i].AnalysisItem.Guid&&t.GroupAnalysisId==n[u].GroupAnalysis.Guid);f=t===null||t===undefined?f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[i].AnalysisItem.Name+" ("+r[i].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysisItem="+r[i].AnalysisItem.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[i].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>":f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[i].AnalysisItem.Name+" ("+r[i].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%' title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysisItem="+r[i].AnalysisItem.Guid+"  value = "+t.Value+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[i].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}else f=f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[i].AnalysisItem.Name+" ("+r[i].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric' data-group="+n[u].GroupAnalysis.Guid+"  data-analysisItem="+r[i].AnalysisItem.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[i].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>";i=i+f}i=i+"<\/div>";r.push({text:f,content:i,CssClass:"analysis-name"})}if(n[u].Analysis!==null&&n[u].Analysis!==undefined){let e=n[u].Analysis.Name,f="<div class ='tabs col-sm-11' style = 'overflow:auto;height:42vh'>",i="";if(n[u].Analysis.Analysis_AnalysisItem!==null&&n[u].Analysis.Analysis_AnalysisItem!==undefined){let r=n[u].Analysis.Analysis_AnalysisItem;for(let f=0;f<r.length;f++)if((r[f].AnalysisItem.NormalValues==="null"||r[f].AnalysisItem.NormalValues===null||r[f].AnalysisItem.NormalValues==="NULL")&&(r[f].AnalysisItem.NormalValues=""),(r[f].AnalysisItem.UnitName==="null"||r[f].AnalysisItem.UnitName===null||r[f].AnalysisItem.UnitName==="NULL")&&(r[f].AnalysisItem.UnitName=""),r[f].AnalysisItem.ValueTypeName==="Numerical")if(analysisResult.length!==0){n[u].AnalysisId===undefined&&(n[u].AnalysisId=null);let t=analysisResult.find(n=>n.AnalysisId==r[f].AnalysisId&&n.AnalysisItemId==r[f].AnalysisItem.Guid&&n.GroupAnalysisId==null);i=t===null||t===undefined?i+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[f].AnalysisItem.Name+" ("+r[f].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' style = 'width:100%' type='number'  title='numeric' data-analysis="+r[f].AnalysisId+"   data-analysisItem="+r[f].AnalysisItem.Guid+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[f].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>":i+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)' >"+r[f].AnalysisItem.Name+" ("+r[f].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' style = 'width:100%' type='number'  title='numeric' data-analysis="+r[f].AnalysisId+"   data-analysisItem="+r[f].AnalysisItem.Guid+"  value = "+t.Value+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[f].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}else i=i+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[f].AnalysisItem.Name+" ("+r[f].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number'  style = 'width:100%'   type='number'  title='numeric' data-analysis="+r[f].AnalysisId+"   data-analysisItem="+r[f].AnalysisItem.Guid+"' /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[f].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>";else if(r[f].AnalysisItem.ValueTypeName==="Optional"){i=i+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[f].AnalysisItem.Name+" ("+r[f].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input  id = 'dropdown_"+priority+"'  class = 'dropdown'  style = 'width:100%'  title='optional' style='width: 100%;' data-analysis="+r[f].AnalysisId+"   data-analysisItem="+r[f].AnalysisItem.Guid+"   /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[f].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>";let n=[];if(r[f].AnalysisItem.AnalysisItemValuesRanges!==null&&r[f].AnalysisItem.AnalysisItemValuesRanges!==undefined)for(let t=0;t<r[f].AnalysisItem.AnalysisItemValuesRanges.length;t++)n.push(r[f].AnalysisItem.AnalysisItemValuesRanges[t]);t.push(n);priority++}else if(r[f].AnalysisItem.ValueTypeName==="Text")if(analysisResult.length!==0){n[u].AnalysisId===undefined&&(n[u].AnalysisId=null);let t=analysisResult.find(n=>n.AnalysisId==r[f].AnalysisId&&n.AnalysisItemId==r[f].AnalysisItem.Guid&&n.GroupAnalysisId==null);i=t===null||t===undefined?i+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[f].AnalysisItem.Name+" ("+r[f].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text'  style = 'width:100%' title='numeric' data-analysis="+r[f].AnalysisId+"   data-analysisItem="+r[f].AnalysisItem.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[f].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>":i+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[f].AnalysisItem.Name+" ("+r[f].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric' data-analysis="+r[f].AnalysisId+"   data-analysisItem="+r[f].AnalysisItem.Guid+"  value = "+t.Value+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[f].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}else i=i+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r[f].AnalysisItem.Name+" ("+r[f].AnalysisItem.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric' data-analysis="+r[f].AnalysisId+"   data-analysisItem="+r[f].AnalysisItem.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r[f].AnalysisItem.NormalValues+"<\/h4><\/div><\/div>"}f=f+i+"<\/div>";r.push({text:e,content:f,CssClass:"analysis-name"})}if(n[u].AnalysisItem!==null&&n[u].AnalysisItem!==undefined){e=!0;let r=n[u].AnalysisItem;(r.NormalValues==="null"||r.NormalValues===null||r.NormalValues==="NULL")&&(r.NormalValues="");(r.UnitName==="null"||r.UnitName===null||r.UnitName==="NULL")&&(r.UnitName="");let f="";if(r.ValueTypeName==="Numerical")if(analysisResult.length!==0){let n=analysisResult.find(n=>n.AnalysisId==null&&n.AnalysisItemId==r.Guid&&n.GroupAnalysisId==null);f=n===null||n===undefined?f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r.Name+" ("+r.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' type='number' style = 'width:100%' title='numeric'  data-analysisItem="+r.Guid+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r.NormalValues+"<\/h4><\/div><\/div>":f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r.Name+" ("+r.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' type='number' style = 'width:100%' title='numeric'  data-analysisItem="+r.Guid+"  value = "+n.Value+"'  /><\/div><div class = 'col-sm-4 pull-left '><h4 class='pull-left MyFont-Roboto-grid'>"+r.NormalValues+"<\/h4><\/div><\/div>"}else f=f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r.Name+" ("+r.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'number' style = 'width:100%'  type='number'  title='numeric'    data-analysisItem="+r.Guid+"'  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r.NormalValues+"<\/h4><\/div><\/div>";else if(r.ValueTypeName==="Optional"){f=f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r.Name+" ("+r.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input  id = 'dropdown_"+priority+"'  class = 'dropdown'  style = 'width:100%'  title='optional'   data-analysisItem="+r.Guid+"   /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r.NormalValues+"<\/h4><\/div><\/div>";let n=[];if(r.AnalysisItemValuesRanges!==null&&r.AnalysisItemValuesRanges!==undefined)for(let t=0;t<r.AnalysisItemValuesRanges.length;t++)n.push(r.AnalysisItemValuesRanges[t]);t.push(n);priority++}else if(r.ValueTypeName==="Text")if(analysisResult.length!==0){let n=analysisResult.find(n=>n.AnalysisId==null&&n.AnalysisItemId==r.Guid&&n.GroupAnalysisId==null);f=n===null||n===undefined?f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r.Name+" ("+r.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric'    data-analysisItem="+r.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r.NormalValues+"<\/h4><\/div><\/div>":f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r.Name+" ("+r.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%' title='numeric'  data-analysisItem="+r.Guid+"  value = "+n.Value+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r.NormalValues+"<\/h4><\/div><\/div>"}else f=f+"<div class='col-sm-12' style = 'font-size:1.5rem;margin:0.5rem 0'><div class = 'col-sm-4 pull-left'><span class='pull-right analysis-name' style = 'transform:translateY(20%)'>"+r.Name+" ("+r.UnitName+")<\/span><\/div><div class = 'col-sm-2 pull-left' ><input class = 'text' style = 'width:100%'  title='numeric'    data-analysisItem="+r.Guid+"  /><\/div><div class = 'col-sm-4 pull-left'><h4 class='pull-left MyFont-Roboto-grid'>"+r.NormalValues+"<\/h4><\/div><\/div>";i=i+f}}e&&(i=i+"<\/div>",r.push({text:"Other Analyses",content:i,CssClass:"analysis-name"}));$("#AnalysisTab").kendoTabStrip({dataTextField:"text",dataContentField:"content",dataSpriteCssClass:"CssClass",dataSource:r}).data("kendoTabStrip").select(0);$(".number").kendoNumericTextBox();$(".text").kendoTextBox();for(let n=1;n<priority;n++)$("#dropdown_"+n).kendoDropDownList({dataTextField:"Value",dataValueField:"Value",dataSource:t[n-1],attributes:{"class":"drop"}})}function OkAndExit(){var n=[],i;AggregateData(n);let r=$("#Explanation").data("kendoEditor"),t="",u=$("#useTemp").text();t=u==="true"?r.value():$("#Explanation2").val();let f={Guid:$("#Guid").val(),Description:t,PrintedNum:$("#PrintedNum").val(),AnalysisResults:n};$(".loader").removeClass("hidden");i=$(':input:hidden[name*="RequestVerificationToken"]');$.ajax({type:"Post",url:"/AnalysisResultMaster/AddOrUpdate",data:{__RequestVerificationToken:i.attr("value"),AnalysisResultMaster:f},success:function(n){n!==0&&$(".page-content").load("/AnalysisResultMaster/Form",function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}})}function Exit(){$(".loader").removeClass("hidden");$(".page-content").load("/AnalysisResultMaster/Form",function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}function AnalysisResultReport(){let n=ThisPatientIsDebtor+" \n ("+remainAmount+" "+currencyType+")";parseFloat(remainAmount)!==0?bootbox.dialog({message:"<h5 class='MyFont-Sarchia-grid'>"+n+"<\/h5>",size:"large",buttons:{cancel:{label:lblcancel,className:"btn-danger MyFont-Sarchia-grid",callback:function(){}},noclose:{label:lblPrint,className:"btn-warning MyFont-Sarchia-grid",callback:function(){PreparingForPrint()}},ok:{label:lblRecieve,className:"btn-info MyFont-Sarchia-grid",callback:function(){$(".loader").removeClass("hidden");$("#PatientReceptionReceivedModal").modal("toggle");$("#PatientReceptionReceivedModal-body").load("/PatientReceptionReceived/AddNewModal",function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden");$("#PatientReceptionReceivedAmount").val(remainAmount)})}}}}):PreparingForPrint()}function PreparingForPrint(){var t,r;let n=$("#PrintedNum").val();n=n===null||n===""||n===undefined?1:parseInt($("#PrintedNum").val())+1;t=[];AggregateData(t);let u=$("#Explanation").data("kendoEditor"),i="",f=$("#useTemp").text();i=f==="true"?u.value():$("#Explanation2").val();let e={Guid:$("#Guid").val(),Description:i,PrintedNum:n,AnalysisResults:t,InvoiceDate:$("#InvoiceDate").val(),CreatedDate:$("#CreatedDate").val()};$(".loader").removeClass("hidden");r=$(':input:hidden[name*="RequestVerificationToken"]');$.ajax({type:"Post",url:"/AnalysisResultMaster/AddOrUpdate",data:{__RequestVerificationToken:r.attr("value"),AnalysisResultMaster:e},success:function(){let n=$("#Guid").val();$.ajax({url:"/AnalysisResultMaster/PrintAnalysisResultReport",type:"Post",data:{AnalysisResultMasterId:n},success:function(n){Exit();draw2(n);$(".loader").fadeIn("slow");$(".loader").addClass("hidden")},error:function(){}})}});bodyPadding()}function keyPressConfigurations(){let t=$("#AnalysisTab").data("kendoTabStrip"),n=$(".tabs");if(n.length>0)for(let i=0;i<n.length;i++){let r=$(n[i]).find("[data-analysisItem]");if(r.length>0)for(let u=0;u<r.length;u++)u===r.length-1&&i===n.length-1?$(r[u]).hasClass("text")||$(r[u]).hasClass("number")?$(r[u]).keypress(function(n){n.which===13&&$("#Explanation").focus()}):$(r[u]).hasClass("dropdown")&&$(r[u]).parent().keypress(function(n){n.which===13&&$("#Explanation").focus()}):u===r.length-1?(($(r[u]).hasClass("text")||$(r[u]).hasClass("number"))&&$(r[u]).keypress(function(r){if(r.which===13){t.select(i+1);let r=$(n[i+1]).find("[data-analysisItem]")[0];$(r).hasClass("text")||$(r).hasClass("number")?$(r).focus():$(r).hasClass("dropdown")&&($(r).data("kendoDropDownList").focus(),$(r).data("kendoDropDownList").open())}}),$(r[u]).hasClass("dropdown")&&$(r[u]).parent().keypress(function(r){if(r.which===13){t.select(i+1);let r=$(n[i+1]).find("[data-analysisItem]")[0];$(r).hasClass("text")||$(r).hasClass("number")?$(r).keypress(function(n){n.which===13&&$(r).focus()}):$(r).hasClass("dropdown")&&($(r).data("kendoDropDownList").focus(),$(r).data("kendoDropDownList").open())}})):$(r[u]).hasClass("text")||$(r[i]).hasClass("number")?$(r[u]).keypress(function(n){n.which===13&&(($(r[u+1]).hasClass("text")||$(r[u+1]).hasClass("number"))&&$(r[u+1]).focus(),$(r[u+1]).hasClass("dropdown")&&($(r[u+1]).data("kendoDropDownList").focus(),$(r[u+1]).data("kendoDropDownList").open()))}):$(r[u]).hasClass("dropdown")&&$(r[u]).parent().keypress(function(n){n.which===13&&(($(r[u+1]).hasClass("text")||$(r[u+1]).hasClass("number"))&&$(r[u+1]).focus(),$(r[u+1]).hasClass("dropdown")&&($(r[u+1]).data("kendoDropDownList").focus(),$(r[u+1]).data("kendoDropDownList").open()))})}}function AggregateData(n){let t=$("[data-analysisItem]");analysisResultMasterId=$("#Guid").val();for(let i=0;i<t.length;i++){let u=t[i].dataset.analysis,f=t[i].dataset.analysisitem,e=t[i].dataset.group,r=t[i].value;r!==""&&r!==null&&n.push({AnalysisResultMasterId:analysisResultMasterId,Value:r,AnalysisId:u,AnalysisItemId:f,GroupAnalysisId:e})}}function bodyPadding(){$("body").addClass("body-padding")}function addNewPatientReceptionReceived(){let n=parseFloat($("#PatientReceptionReceivedAmount").val());if(n===0||n===null||n===undefined||Number.isNaN(n)){$("#PatientReceptionReceivedAmount-box").removeClass("hidden");return}let t=$("#PatientReceptionId").val();var i={PatientReceptionId:t,Amount:n,AmountCurrencyId:$("#PatientReceptionReceivedAmountCorrencyId").val()};$(".loader").removeClass("hidden");$.ajax({type:"Post",url:"/PatientReceptionReceived/AddOrUpdate",data:i,success:function(t){t!==0&&($(".loader").fadeIn("slow"),$(".loader").addClass("hidden"),remainAmount=remainAmount-n,AnalysisResultReport())}});$("#PatientReceptionReceivedModal").modal("toggle");$("#PatientReceptionReceivedModal-body").empty()}function closePatientReceptionReceivedModal(){$("#PatientReceptionReceivedModal").modal("toggle");$("#PatientReceptionReceivedModal-body").empty()}function GoToCustomReception(n){let i=parseInt($("#InvoiceNumber").val()),r=parseInt($("#LastInvoiceNum").val()),f=parseInt($("#FirstInvoiceNum").val()),t=0;if(n==="Next"){if(i>=r){bootbox.dialog({message:"<h5 class = 'MyFont-Sarchia-grid'> This is a Last Reception <\/h5>",className:"bootbox-class MyFont-Sarchia-grid",size:"small"});window.setTimeout(function(){bootbox.hideAll()},2e3);return}t=i+1;getReception(t)}else if(n==="Pre"){if(i==="1"){bootbox.dialog({message:"<h5 class = 'MyFont-Sarchia-grid'> This is a First Reception <\/h5>",className:"bootbox-class MyFont-Sarchia-grid",size:"small"});window.setTimeout(function(){bootbox.hideAll()},2e3);return}t=i-1;getReception(t)}else if(n==="Last"){if(i===r){bootbox.dialog({message:"<h5 class = 'MyFont-Sarchia-grid'> This is a Last Reception <\/h5>",className:"bootbox-class MyFont-Sarchia-grid",size:"small"});window.setTimeout(function(){bootbox.hideAll()},2e3);return}t=r;getReception(t)}else if(n==="First"){if(i===f){bootbox.dialog({message:"<h5 class = 'MyFont-Sarchia-grid'> This is Today's First Reception <\/h5>",className:"bootbox-class MyFont-Sarchia-grid",size:"small"});window.setTimeout(function(){bootbox.hideAll()},2e3);return}t=f;getReception(t)}let u=$("#ReceptionNumber").val();if(u!==null&&u!==undefined&&u!==""){if(t=parseInt($("#ReceptionNumber").val()),t>=r){bootbox.alert({message:"this reception number not exist",className:"bootbox-class MyFont-Sarchia-grid"});return}isNaN(t)||getReception(t)}}function draw2(n){"use strict";var i=[],t;for(let r=0;r<n.allb.length;r++)t=new Image,t.src="data:image/jpeg;base64,"+n.allb[r],i.push(t.src);printJS({printable:i,type:"image"})}function getReception(n){bootbox.dialog({message:"<h5 class = 'MyFont-Sarchia-grid'> You Dont Save This Analysis Result Do You Want Save It? <\/h5>",className:"bootbox-class MyFont-Sarchia-grid",size:"medium",buttons:{cancel:{label:"No",className:"MyFont-Roboto-grid",callback:function(){$(".loader").removeClass("hidden");$(".page-content").load("/AnalysisResultMaster/GetAnalysisResult?InvoiceNum="+n,function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}},ok:{label:"Yes",className:"MyFont-Roboto-grid",callback:function(){let t=[];AggregateData(t);let r=$("#Explanation").data("kendoEditor"),i="",u=$("#useTemp").text();i=u==="true"?r.value():$("#Explanation2").val();let f={Guid:$("#Guid").val(),Description:i,PrintedNum:$("#PrintedNum").val(),AnalysisResults:t};$(".loader").removeClass("hidden");var e=$(':input:hidden[name*="RequestVerificationToken"]');$.ajax({type:"Post",url:"/AnalysisResultMaster/AddOrUpdate",data:{__RequestVerificationToken:e.attr("value"),AnalysisResultMaster:f},success:function(t){t!==0&&$(".page-content").load("/AnalysisResultMaster/GetAnalysisResult?InvoiceNum="+n,function(){$(".loader").fadeIn("slow");$(".loader").addClass("hidden")})}})}}}})}var patientAuto,invoiceNumAuto,printed,receptionAnalysis,analysisResult;let priority=1;printed=!1;$(document).ready(function(){$.when(AnalysisResultAjax(),patientReceptionAnalysisAjax()).done(function(){$("#AnalysisTab").empty();CreateDynamicTab(receptionAnalysis);let n=$("[data-analysisItem]");console.log(n);let t=$("#PatientDateOfBirth").data("kendoDatePicker");if($("#PatientDateOfBirth").val()!==""&&getAge(kendo.toString(t.value(),"d")),keyPressConfigurations(),($(n[0]).hasClass("text")||$(n[0]).hasClass("number"))&&$(n[0]).focus(),$(n[0]).hasClass("dropdown")){let t=$(n[0]).data("kendoDropDownList");t.focus();t.open()}if(analysisResult.length!==0)for(let n=1;n<priority;n++){let t=$("#dropdown_"+n).data("kendoDropDownList"),i=t.element.context.dataset.analysis;i===undefined&&(i=null);let u=t.element.context.dataset.analysisitem,r=t.element.context.dataset.group;r===undefined&&(r=null);let f=analysisResult.find(n=>n.AnalysisId==i&&n.AnalysisItemId==u&&n.GroupAnalysisId==r);t.value(f.Value)}});let n="";$.ajax({type:"Post",url:"/ClinicSectionSetting/GetSpecificSettingByName",data:{SettingName:"UseTemplate"},success:function(t){n=t.toLowerCase();n.toLowerCase()==="true"?($("#UseTemplateCheckbox").prop("checked",!0),$("#TempelateSection").removeClass("hidden"),$("#TempelateSection2").removeClass("hidden"),$("#EditorTab").removeClass("hidden"),$("#ExplanationTab").addClass("hidden"),$("#useTemp").text(n.toLowerCase())):$("#useTemp").text(n.toLowerCase())}});$("select.k-fontSize").children().first().remove();let t=$("input.k-fontSize").attr("aria-owns");$("#"+t).children().first().remove();let i=$("#"+t).children().eq(4).click()});$("#Explanation").on("keydown",function(n){n.which===9&&(n.preventDefault(),$("#okAndExit").focus())});$("#okAndExit").on("keydown",function(n){n.which===37&&$("#btnExit").focus()});$("#btnExit").on("keydown",function(n){n.which===39?$("#okAndExit").focus():n.which===37&&$("#btnPrint").focus()});$("#btnPrint").on("keydown",function(n){n.which===39&&$("#btnExit").focus()});